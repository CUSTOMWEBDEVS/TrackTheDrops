:root{
  --bg:#0b0e13;--ink:#e7eef8;--muted:#9fb2c7;--line:#263245;--panel:#0f1724;--accent:#ef4444;--ok:#22c55e;
  --toolbar:rgba(8,12,19,.78);--blur:8px;--radius:16px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;-webkit-tap-highlight-color:transparent}
.app{height:100dvh;width:100vw;display:flex;flex-direction:column}
.viewport{position:relative;height:100%;background:#000}
.viewport.fs{position:fixed;inset:0;height:100dvh;width:100vw;z-index:10}
video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
video.gray{filter:grayscale(100%)}
.overlay{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;mix-blend-mode:screen;pointer-events:none}
.flash{position:absolute;inset:0;background:#fff;opacity:0;pointer-events:none;transition:opacity .12s ease;z-index:6}
.tap-hint{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);z-index:5}

.hud{position:absolute;left:12px;top:12px;display:flex;gap:10px;font-size:12px;color:#d7deef;background:rgba(12,17,25,.55);
  padding:7px 10px;border-radius:12px;border:1px solid var(--line);z-index:7}
.topbar{position:absolute;top:10px;left:10px;right:10px;display:flex;gap:8px;align-items:center;z-index:8}
.topbar .spacer{flex:1}
.icon{border:1px solid var(--line);background:rgba(14,20,31,.55);backdrop-filter:blur(var(--blur));color:var(--ink);padding:10px;border-radius:12px}
.icon:active{transform:scale(.98)}

.toolbar{position:absolute;bottom:10px;left:10px;right:10px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px;z-index:8;
  background:var(--toolbar);backdrop-filter:blur(var(--blur));border:1px solid var(--line);padding:10px;border-radius:16px}
.tool{font-size:14px;font-weight:600;border:1px solid var(--line);background:rgba(12,18,28,.7);color:var(--ink);padding:12px;border-radius:12px}
.tool:active{transform:scale(.98)}
.tool[aria-pressed="true"]{outline:2px solid var(--ok)}

.drawer{position:fixed;left:0;right:0;bottom:-70%;height:60%;background:var(--panel);border-top-left-radius:20px;border-top-right-radius:20px;
  border:1px solid var(--line);z-index:12;transition:transform .25s ease, bottom .25s ease;transform:translateY(0);}
.drawer.open{bottom:0}
.drawer-head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid var(--line)}
.drawer-body{padding:10px 14px;display:flex;flex-direction:column;gap:8px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px;align-items:center}
.hint{color:#ffd166;font-size:12px;margin-top:6px}
.ghost{background:transparent;color:var(--muted)}

/* Auto-hide UI */
.hiddenUI .toolbar,
.hiddenUI .topbar,
.hiddenUI .hud { opacity:0; pointer-events:none; transition:opacity .25s ease; }
.toolbar,.topbar,.hud { transition:opacity .25s ease; }
